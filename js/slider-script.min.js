let sliderLine=document.querySelector(".slider__line"),width=document.querySelector(".slider").offsetWidth,slideInd=1,slides=document.querySelectorAll(".slider__img"),switchBody=document.querySelector(".slider__switch_body"),prev=document.querySelector(".prev"),next=document.querySelector(".next");function addSwitch(){for(let e=0;e<slides.length;e++){let e=document.createElement("div");e.className+="slider__switch",switchBody.appendChild(e)}}function cloneImg(){let e=slides[0],t=slides[slides.length-1],i=e.cloneNode(!0),l=t.cloneNode(!0),s=sliderLine.offsetLeft;slides.length;function n(){c(-1)}function d(){c(1)}function c(e){if(s=sliderLine.offsetLeft,-1==e){prev.removeEventListener("click",n);let e=sliderLine.offsetLeft,t=-width*(slideInd-1),i=setInterval((function(){if(e+=10,sliderLine.style.left=e+"px",e>=t)return sliderLine.style.left=-width*slideInd+"px",e=0,t=0,clearInterval(i),void prev.addEventListener("click",n);0==slideInd&&(sliderLine.style.left=-width*(slides.length-2)+"px",slideInd=slides.length-2)}),0);Date.now();slideInd-=1,replaceSwitch(slideInd)}else if(1==e){next.removeEventListener("click",d);let e=sliderLine.offsetLeft,t=-width*(slideInd+1),i=setInterval((function(){if(e-=10,sliderLine.style.left=e+"px",e<=t)return sliderLine.style.left=-width*slideInd+"px",e=0,t=0,clearInterval(i),void next.addEventListener("click",d);slideInd==slides.length-1&&(sliderLine.style.left=-1*width+"px",slideInd=1)}),0);Date.now();slideInd+=1,replaceSwitch(slideInd)}}sliderLine.appendChild(i),sliderLine.insertBefore(l,e),slides=document.querySelectorAll(".slider__img"),prev.addEventListener("click",n),next.addEventListener("click",d)}function currentSlide(e){showSlide(slideInd=e)}function initSlider(){width=document.querySelector(".slider").offsetWidth,sliderLine.style.width=width*slides.length+"px",slides.forEach(e=>{e.style.width=width+"px",e.style.height="auto"}),sliderRoll(slideInd)}addSwitch(),cloneImg(),window.addEventListener("resize",initSlider),initSlider();let switchBtn=document.querySelectorAll(".slider__switch"),swtArr=[];function initSwitch(){for(let e=0;e<switchBtn.length;e++)swtArr.push(switchBtn[e]),switchBtn[e].addEventListener("click",(function(e){let t=swtArr.indexOf(e.target);switchMove(t+1,t)}))}function replaceSwitch(){if(slideInd>=slides.length-1)return switchBtn[0].className+=" active",void(switchBtn[switchBtn.length-1].className=switchBtn[switchBtn.length-1].className.replace(" active",""));if(slideInd<=0)return switchBtn[0].className=switchBtn[0].className.replace(" active",""),void(switchBtn[switchBtn.length-1].className+=" active");for(i=0;i<switchBtn.length;i++)switchBtn[i].className=switchBtn[i].className.replace(" active","");switchBtn[slideInd-1].className+=" active"}function switchMove(e,t){let i;for(i=0;i<switchBtn.length;i++)switchBtn[i].className=switchBtn[i].className.replace(" active","");if(switchBtn[e-1].className+=" active",slideInd=e,t==e-1){let t=sliderLine.offsetLeft,i=-width*e,s=setInterval(l,0);Date.now();function l(){if(t+=10,sliderLine.style.left=t+"px",t>=i)return sliderLine.style.left=-width*e+"px",t=0,i=0,void clearInterval(s)}}if(t<e){let t=sliderLine.offsetLeft,i=-width*e,s=setInterval(l,0);Date.now();function l(){if(t-=10,sliderLine.style.left=t+"px",t<=i)return sliderLine.style.left=-width*e+"px",t=0,i=0,void clearInterval(s)}}}function showSlide(e){e>slides.length-1&&(slideInd=0),e<0&&(slideInd=slides.length),sliderRoll(e)}function sliderRoll(e){sliderLine.style.left=-width*slideInd+"px"}switchBtn[slideInd-1].className+=" active",initSwitch();